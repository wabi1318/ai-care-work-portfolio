# LLM設計：スキル定義連携によるケア活動分析支援

## 目的

ケア活動（育児・介護・家事等）の記録をもとに、LLMがスキルの傾向・発揮の文脈・職務経歴書向けの表現を出力する。その際、評価の透明性と信頼性を担保するため、事前に定義されたスキル情報（定義）をLLMに提供し、判断の根拠として活用させる。
数値的なスコアや習熟度ではなく、活動の中にどれほど自然にスキルが表れていたかを、言語的に表現する。

---

## 使用構成の概要

| 要素             | 技術・構成例                                               |
| ---------------- | ---------------------------------------------------------- |
| LLM              | OpenAI GPT-4o                                              |
| スキル定義形式   | JSON（スキル名・定義）                                     |
| 定義読み込み方式 | systemメッセージ／インラインコンテキスト／ベクトル検索連携 |
| データ検索       | Supabase pgvector, Pinecone, Weaviateなど                  |
| 活動入力         | ユーザーによる自然言語の活動記録（フォーム／チャット）     |
| 出力             | JSON構造 or Markdown箇条書き                               |

---

## 実装ステップとプロンプト設計

### ステップ1：スキル定義の構造化

```json
[
  {
    "name": "マルチタスク管理能力",
    "definition": "複数の作業を同時に進行し、適切に切り替えて遂行する能力"
  },
  {
    "name": "問題解決・危機対応力",
    "definition": "課題を発見し、冷静に対応策を立案・実行する能力"
  },
  {
    "name": "コミュニケーション能力",
    "definition": "相手の話を理解し、自分の考えを明確に伝える能力"
  },
  {
    "name": "忍耐力・感情マネジメント",
    "definition": "困難な状況下でも冷静さと前向きさを保つ能力"
  },
  {
    "name": "計画力・時間管理能力",
    "definition": "目標達成に向けて計画を立て、優先順位を整理して遂行する能力"
  },
  {
    "name": "共感・傾聴力",
    "definition": "相手の立場や感情に寄り添い、丁寧に話を聞く能力"
  },
  {
    "name": "サポート力",
    "definition": "他者の立場に立ち、必要に応じて支援・補助を行う能力"
  }
]
```

### ステップ2：systemメッセージに埋め込む

```text
あなたはケア活動からスキルを抽出する支援者です。
以下のスキル定義を参照し、ユーザーの活動記録から適切なスキルを最大5件抽出してください。

各スキルには次の情報を含めて出力してください：
- スキル名
- 定義
- フレームワーク名
- URL
- なぜそのスキルが活動と関連していると判断できるか
- 発揮傾向（強く見られる／よく見られる／少し見られる）
- 関連性の高さ（高い／中程度／低い）

【スキル定義】:
...
```

---

## 出力フォーマット（再掲）

```json
{
  "skills": [
    {
      "name": "時間管理",
      "tendency": "強く見られる",
      "relevance": "高い",
      "reason": "朝の遅れに対応しつつ、予定通り送迎を完了している"
    },
    {
      "name": "感情制御",
      "tendency": "よく見られる",
      "relevance": "中程度",
      "reason": "焦った状況でも冷静に対応したと記述がある"
    },
    {
      "name": "責任感",
      "tendency": "よく見られる",
      "relevance": "高い",
      "reason": "困難がある中でも子どもを送り届ける義務を果たしている"
    }
  ],
  "resume_summary": [
    "時間変更に柔軟に対応し、家庭内のスケジュール調整を的確に実行",
    "先を見越した準備と問題解決能力で効率的なタスク管理を実現",
    "突発的な事態にも冷静に対処し、安定したケアを提供した"
  ]
}
```

---

## メモ・補足

- 各スキルには日本語・英語両対応の定義を用意しても良い（国際展開時）
- systemメッセージに含めるスキル定義が長すぎる場合は、カテゴリ別でグルーピングして日替わりロード方式なども検討可
- 特定の出典に偏らないよう、複数フレームワーク（厚労省・経産省・OECD等）からのバランスを意識する
